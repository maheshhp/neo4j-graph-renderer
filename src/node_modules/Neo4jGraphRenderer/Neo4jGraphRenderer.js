import React, { Component } from 'react';
import { createGraph } from './assets/graph';
import { renderResult } from './assets/render-result';
import './Neo4jGraphRenderer.css';

class Neo4JGraphRenderer extends Component {
  componentDidMount() {
    this.loadData(this.props);
  }

  componentWillReceiveProps(newProps) {
    this.loadData(newProps);
  }

  loadData(props) {
    const connection = { url: props.url, user: props.user, pass: props.password };
    createGraph(connection, props.query);
  }

  render () {
    return <div id="graph"/>;
  }
}

export default {
  renderResult,
  Neo4JGraphRenderer
}
